#/usr/bin/env bash
if [[ ! -d "build" ]]; then
	mkdir build
fi
	
cd build
if [[ $1 == d ]]; then
	cmake .. -DCMAKE_BUILD_TYPE=Debug
elif [[ $1 == p ]]; then
	cmake .. -DCMAKE_BUILD_TYPE=Release
fi

if make; then
	success=1
else
	success=0
fi

if (( success == 0 )); then
	echo "Make failed!"
	return
fi

if [[ $1 == d ]]; then
	lldb ./run_test
elif [[ $1 == p ]]; then
	if [[ $# -lt 2 ]]; then
		echo "Provide a map!"
	else
		./run_test $2.txt
	fi
fi

